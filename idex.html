<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Jogo Escolar Interativo</title>
  <style>
    /* Reset básico */
    * {
      margin: 0; padding: 0; box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    body {
      background: #f0f4f8;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      padding: 20px;
      color: #333;
      user-select: none;
    }
    #game-container {
      background: white;
      border-radius: 15px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.15);
      width: 900px;
      max-width: 95vw;
      min-height: 700px;
      padding: 20px 40px 40px 40px;
      position: relative;
      overflow: hidden;
    }
    header {
      text-align: center;
      margin-bottom: 25px;
    }
    header h1 {
      font-size: 2.8rem;
      color: #2c3e50;
      letter-spacing: 1.2px;
    }

    /* Área do notebook */
    #notebook {
      width: 100%;
      height: 360px;
      border-radius: 10px;
      margin-bottom: 30px;
      padding: 25px 30px 40px 30px;
      position: relative;
      overflow-y: auto;
      box-shadow: inset 0 0 7px #ccc;
      background-color: #fff;
      transition: background-color 0.3s ease;
      font-size: 1.25rem;
      line-height: 1.5;
    }
    /* Caderno Matemática - papel quadriculado */
    #notebook.matematica {
      background-image:
        linear-gradient(to right, #d0d7de 1px, transparent 1px),
        linear-gradient(to bottom, #d0d7de 1px, transparent 1px);
      background-size: 30px 30px;
      font-family: 'Courier New', Courier, monospace;
    }
    /* Caderno Português - linhas */
    #notebook.portugues {
      background-image: linear-gradient(to bottom, #d0d7de 1.5px, transparent 1.5px);
      background-size: 100% 30px;
      font-family: 'Georgia', serif;
    }
    /* Caderno História - linhas */
    #notebook.historia {
      background-image: linear-gradient(to bottom, #d0d7de 1.5px, transparent 1.5px);
      background-size: 100% 28px;
      font-family: 'Times New Roman', Times, serif;
      font-style: italic;
    }

    #subject-name {
      font-weight: 700;
      font-size: 1.8rem;
      color: #34495e;
      margin-bottom: 15px;
      text-align: center;
      text-transform: uppercase;
      letter-spacing: 1.5px;
    }

    #question {
      margin-bottom: 15px;
    }
    #hint {
      font-style: italic;
      color: #7f8c8d;
      margin-bottom: 15px;
    }

    #answer-input {
      width: 100%;
      padding: 12px 15px;
      font-size: 1.2rem;
      border: 2px solid #bdc3c7;
      border-radius: 8px;
      outline-offset: 2px;
      transition: border-color 0.3s ease;
      margin-bottom: 15px;
    }
    #answer-input:focus {
      border-color: #27ae60;
      box-shadow: 0 0 10px #27ae60aa;
    }

    /* Botões */
    #buttons {
      display: flex;
      justify-content: center;
      gap: 18px;
      margin-bottom: 15px;
    }
    button {
      cursor: pointer;
      background-color: #27ae60;
      border: none;
      color: white;
      font-size: 1.1rem;
      font-weight: 600;
      padding: 12px 22px;
      border-radius: 10px;
      box-shadow: 0 6px #1e8449;
      transition: background-color 0.3s ease;
      user-select: none;
      flex: 1;
      max-width: 200px;
    }
    button:hover:not(:disabled) {
      background-color: #2ecc71;
    }
    button:active:not(:disabled) {
      box-shadow: 0 2px #1e8449;
      transform: translateY(4px);
    }
    button:disabled {
      background-color: #95a5a6;
      cursor: not-allowed;
      box-shadow: none;
      transform: none;
    }

    #message {
      text-align: center;
      font-weight: 700;
      font-size: 1.3rem;
      min-height: 38px;
      margin-bottom: 10px;
    }

    #mark {
      font-size: 2.5rem;
      font-weight: 900;
      position: absolute;
      right: 50px;
      top: 40px;
      user-select: none;
    }
    #mark.correct {
      color: #27ae60;
    }
    #mark.wrong {
      color: #e74c3c;
    }

    /* Caneta container */
    #pen-container {
      position: absolute;
      top: 40px;
      right: 20px;
      width: 70px;
      height: 70px;
      cursor: pointer;
      opacity: 0;
      transition: opacity 0.4s ease;
      user-select: none;
      z-index: 100;
    }
    #pen-container.visible {
      opacity: 1;
    }
    #pen-container svg {
      width: 100%;
      height: 100%;
      filter: drop-shadow(1px 1px 1px rgba(0,0,0,0.12));
      transition: transform 0.3s ease;
    }
    #pen-container:hover svg {
      transform: rotate(10deg) scale(1.1);
    }

    @keyframes pen-move {
      0% { transform: translate(0, 0) rotate(0deg); }
      50% { transform: translate(-30px, -20px) rotate(-15deg); }
      100% { transform: translate(0, 0) rotate(0deg); }
    }
    #pen-container.moving {
      animation: pen-move 1.5s ease forwards;
    }

    /* Calculadora */
    #calculator {
      width: 320px;
      margin: 0 auto 30px auto;
      background: #ecf0f1;
      border-radius: 12px;
      padding: 15px 20px;
      box-shadow: inset 0 0 10px #bdc3c7;
      user-select: none;
    }
    #calc-display {
      width: 100%;
      height: 45px;
      font-size: 1.5rem;
      border-radius: 10px;
      border: 2px solid #bdc3c7;
      padding: 0 15px;
      margin-bottom: 15px;
      text-align: right;
      outline-offset: 2px;
      background-color: #fff;
      user-select: text;
    }
    .calc-buttons {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 10px;
    }
    .calc-btn {
      background-color: #3498db;
      color: white;
      font-size: 1.3rem;
      font-weight: 700;
      border-radius: 8px;
      border: none;
      box-shadow: 0 5px #2c80b4;
      transition: background-color 0.3s ease;
      cursor: pointer;
      user-select: none;
      padding: 10px 0;
    }
    .calc-btn:active {
      box-shadow: 0 2px #2c80b4;
      transform: translateY(3px);
    }
    #calc-clear {
      background-color: #e74c3c;
      box-shadow: 0 5px #c0392b;
    }
    #calc-equals {
      background-color: #27ae60;
      box-shadow: 0 5px #1e8449;
    }

    /* Mensagem do professor (leãozinho) */
    #teacher {
      position: absolute;
      left: 30px;
      bottom: 100px;
      width: 280px;
      background: #ffeaa7;
      border-radius: 15px;
      padding: 15px 20px;
      font-weight: 600;
      font-size: 1.1rem;
      color: #6c5ce7;
      box-shadow: 0 0 15px #6c5ce7aa;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.4s ease;
      user-select: none;
    }
    #teacher.show {
      opacity: 1;
      pointer-events: auto;
    }

    /* Leãozinho container */
    #lion-container {
      position: absolute;
      left: 20px;
      bottom: 20px;
      width: 120px;
      height: 120px;
      cursor: pointer;
      user-select: none;
      z-index: 1000;
    }
    #lion-svg {
      width: 100%;
      height: 100%;
      filter: drop-shadow(2px 2px 4px #44444488);
      transition: transform 0.3s ease;
    }
    #lion-container:hover #lion-svg {
      transform: scale(1.07);
    }
  </style>
</head>
<body>
  <div id="game-container">
    <header>
      <h1>Jogo Escolar Interativo</h1>
    </header>

    <div id="subject-name">Matemática</div>

    <div id="notebook" class="matematica">
      <div id="question">Quanto é 7 x 8?</div>
      <div id="hint">Dica: Multiplique 7 por 8.</div>
      <input type="text" id="answer-input" autocomplete="off" placeholder="Digite sua resposta aqui..." />
      <div id="message"></div>
      <div id="mark"></div>
    </div>

    <div id="buttons">
      <button id="btn-submit">Enviar Resposta</button>
      <button id="btn-next-question" disabled>Próxima Pergunta</button>
      <button id="btn-change-subject">Mudar de Matéria</button>
    </div>

    <div id="calculator">
      <input type="text" id="calc-display" disabled placeholder="Calculadora" />
      <div class="calc-buttons">
        <button class="calc-btn" data-value="7">7</button>
        <button class="calc-btn" data-value="8">8</button>
        <button class="calc-btn" data-value="9">9</button>
        <button class="calc-btn" data-value="/">÷</button>

        <button class="calc-btn" data-value="4">4</button>
        <button class="calc-btn" data-value="5">5</button>
        <button class="calc-btn" data-value="6">6</button>
        <button class="calc-btn" data-value="*">×</button>

        <button class="calc-btn" data-value="1">1</button>
        <button class="calc-btn" data-value="2">2</button>
        <button class="calc-btn" data-value="3">3</button>
        <button class="calc-btn" data-value="-">−</button>

        <button class="calc-btn" id="calc-clear">C</button>
        <button class="calc-btn" data-value="0">0</button>
        <button class="calc-btn" id="calc-equals">=</button>
        <button class="calc-btn" data-value="+">+</button>
      </div>
    </div>

    <!-- Caneta animada -->
    <div id="pen-container" title="Clique para ver a resposta correta">
      <!-- Caneta SVG simples -->
      <svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg" fill="#27ae60">
        <path d="M2 54l20-20 6 6-20 20H2v-6zM62 10c0-3-3-6-6-6-2 0-12 7-15 10l-25 25c-2 2-3 5-3 7 0 3 4 6 6 6 2 0 5-1 7-3l25-25c3-3 10-13 10-15z"/>
      </svg>
    </div>

    <!-- Leãozinho interativo -->
    <div id="lion-container" title="Clique para pedir ajuda ao leãozinho">
      <!-- Um leãozinho estilizado SVG -->
      <svg id="lion-svg" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" fill="none" stroke="#d35400" stroke-width="3" stroke-linejoin="round" stroke-linecap="round">
        <!-- Cabeça -->
        <circle cx="50" cy="50" r="25" fill="#f39c12" />
        <!-- Crina -->
        <circle cx="50" cy="50" r="35" stroke="#e67e22" stroke-width="6" />
        <!-- Olhos -->
        <circle cx="40" cy="45" r="4" fill="#2c3e50" />
        <circle cx="60" cy="45" r="4" fill="#2c3e50" />
        <!-- Nariz -->
        <path d="M48 55 L52 55 L50 60 Z" fill="#c0392b" stroke="none" />
        <!-- Boca -->
        <path d="M40 65 Q50 75 60 65" stroke="#c0392b" stroke-width="2" fill="none" />
      </svg>
    </div>

    <!-- Mensagem do professor (leãozinho) -->
    <div id="teacher"></div>

    <!-- Audios -->
    <audio id="lion-sound" src="https://actions.google.com/sounds/v1/animals/lion_roar.ogg" preload="auto"></audio>
    <audio id="pen-sound" src="https://www.soundjay.com/mechanical/sounds/pen-writing-1.mp3" preload="auto"></audio>
  </div>

  <script>
    // Dados das matérias e perguntas
    const subjects = {
      matematica: {
        name: "Matemática",
        className: "matematica",
        questions: [
          {
            question: "Quanto é 7 x 8?",
            hint: "Dica: Multiplique 7 por 8.",
            answer: "56",
          },
          {
            question: "Quanto é 12 + 15?",
            hint: "Dica: Some 12 com 15.",
            answer: "27",
          },
          {
            question: "Qual a raiz quadrada de 81?",
            hint: "Dica: Que número multiplicado por ele mesmo dá 81?",
            answer: "9",
          },
        ],
      },
      portugues: {
        name: "Português",
        className: "portugues",
        questions: [
          {
            question: "Qual é o plural de 'coração'?",
            hint: "Dica: Preste atenção na terminação.",
            answer: "corações",
          },
          {
            question: "Complete: 'Eu ___ feliz.' (verbo ser no presente)",
            hint: "Dica: Use o verbo ser para a 1ª pessoa do singular.",
            answer: "sou",
          },
          {
            question: "Qual é o antônimo de 'rápido'?",
            hint: "Dica: Pense em algo lento.",
            answer: "devagar",
          },
        ],
      },
      historia: {
        name: "História",
        className: "historia",
        questions: [
          {
            question: "Quem descobriu o Brasil?",
            hint: "Dica: Foi um navegador português.",
            answer: "pedro álvares cabral",
          },
          {
            question: "Em que ano começou a Segunda Guerra Mundial?",
            hint: "Dica: Final da década de 1930.",
            answer: "1939",
          },
          {
            question: "Quem foi o primeiro presidente do Brasil?",
            hint: "Dica: Ele liderou a Proclamação da República.",
            answer: "deodoro da fonseca",
          },
        ],
      },
    };

    // Elementos principais
    const subjectNameElem = document.getElementById("subject-name");
    const notebookElem = document.getElementById("notebook");
    const questionElem = document.getElementById("question");
    const hintElem = document.getElementById("hint");
    const answerInput = document.getElementById("answer-input");
    const messageElem = document.getElementById("message");
    const markElem = document.getElementById("mark");
    const btnSubmit = document.getElementById("btn-submit");
    const btnNext = document.getElementById("btn-next-question");
    const btnChange = document.getElementById("btn-change-subject");
    const penContainer = document.getElementById("pen-container");
    const lionContainer = document.getElementById("lion-container");
    const teacherElem = document.getElementById("teacher");
    const lionSound = document.getElementById("lion-sound");
    const penSound = document.getElementById("pen-sound");

    // Calculadora
    const calcDisplay = document.getElementById("calc-display");
    const calcButtons = document.querySelectorAll(".calc-btn");
    const calcClear = document.getElementById("calc-clear");
    const calcEquals = document.getElementById("calc-equals");

    let currentSubjectKey = "matematica";
    let currentQuestionIndex = 0;
    let totalCorrect = 0;
    let answeredQuestions = 0;

    // Mostrar questão atual
    function showQuestion() {
      const subject = subjects[currentSubjectKey];
      const q = subject.questions[currentQuestionIndex];
      subjectNameElem.textContent = subject.name;
      notebookElem.className = subject.className;
      questionElem.textContent = q.question;
      hintElem.textContent = q.hint;
      answerInput.value = "";
      answerInput.disabled = false;
      btnSubmit.disabled = false;
      btnNext.disabled = true;
      messageElem.textContent = "";
      markElem.textContent = "";
      penContainer.classList.remove("visible");
      penContainer.classList.remove("moving");
      penContainer.style.right = "20px";
    }

    // Mensagem do professor (leãozinho)
    function showTeacherMessage(text, duration = 4000) {
      teacherElem.textContent = text;
      teacherElem.classList.add("show");
      setTimeout(() => {
        teacherElem.classList.remove("show");
      }, duration);
    }

    // Função para tocar voz do leãozinho ao mudar matéria
    function playLionVoice() {
      lionSound.pause();
      lionSound.currentTime = 0;
      lionSound.play();
    }

    // Ao mudar matéria, atualiza e fala
    function changeSubject() {
      const keys = Object.keys(subjects);
      let currentIndex = keys.indexOf(currentSubjectKey);
      currentIndex++;
      if (currentIndex >= keys.length) currentIndex = 0;
      currentSubjectKey = keys[currentIndex];
      currentQuestionIndex = 0;
      showQuestion();
      playLionVoice();
      showTeacherMessage("Vamos estudar, meu amigo! Eu te ajudarei nas coisas, então mão na massa!", 6000);
    }

    // Função que verifica resposta
    function checkAnswer() {
      const subject = subjects[currentSubjectKey];
      const currentQ = subject.questions[currentQuestionIndex];
      const userAnswer = answerInput.value.trim().toLowerCase();
      const correctAnswer = currentQ.answer.toLowerCase();

      if (!userAnswer) {
        messageElem.textContent = "Por favor, digite sua resposta!";
        messageElem.style.color = "orange";
        return;
      }

      if (userAnswer === correctAnswer) {
        markElem.textContent = "✔";
        markElem.className = "correct";
        messageElem.textContent = "Parabéns, você acertou!";
        messageElem.style.color = "#27ae60";
        totalCorrect++;
        answeredQuestions++;
        answerInput.disabled = true;
        btnSubmit.disabled = true;
        btnNext.disabled = false;
        penContainer.classList.remove("visible");
        showTeacherMessage("Muito bem! Continue assim, você está aprendendo!", 4000);
      } else {
        markElem.textContent = "✘";
        markElem.className = "wrong";
        messageElem.textContent = "Estude mais, você precisa aprender! Veja a resposta correta.";
        messageElem.style.color = "#e74c3c";
        answeredQuestions++;
        answerInput.disabled = true;
        btnSubmit.disabled = true;
        btnNext.disabled = false;
        penContainer.classList.add("visible");
        penMoveAndWrite(correctAnswer);
        showTeacherMessage("Não desanime, peça ajuda ao leãozinho clicando nele!", 6000);
      }
    }

    // Avançar questão
    function nextQuestion() {
      const subject = subjects[currentSubjectKey];
      if (currentQuestionIndex < subject.questions.length -1) {
        currentQuestionIndex++;
        showQuestion();
      } else {
        // Final da matéria
        if (totalCorrect === subject.questions.length) {
          messageElem.style.color = "#27ae60";
          messageElem.textContent = "Nossa! Você é estudioso, continue assim, você vai ser alguém um dia!";
          markElem.textContent = "🎉";
          penContainer.classList.remove("visible");
          answerInput.disabled = true;
          btnSubmit.disabled = true;
          btnNext.disabled = true;
          showTeacherMessage("Parabéns, campeão! Você arrasou!", 6000);
        } else {
          messageElem.style.color = "#2980b9";
          messageElem.textContent = `Você acertou ${totalCorrect} de ${subject.questions.length}. Continue estudando!`;
          markElem.textContent = "";
          penContainer.classList.remove("visible");
          answerInput.disabled = true;
          btnSubmit.disabled = true;
          btnNext.disabled = true;
          showTeacherMessage("Não desista! Com prática você vai melhorar!", 6000);
        }
      }
    }

    // ANIMAÇÃO E SOM DA CANETA ESCREVENDO

    // Função que escreve letra a letra com som
    function animatePenWritingWithSound(correctAnswer) {
      answerInput.value = "";
      let writeIndex = 0;
      markElem.textContent = "";
      messageElem.textContent = "";

      penSound.loop = true;
      penSound.play();

      const writeInterval = setInterval(() => {
        if (writeIndex < correctAnswer.length) {
          answerInput.value += correctAnswer[writeIndex];
          writeIndex++;
        } else {
          clearInterval(writeInterval);
          penSound.pause();
          penSound.currentTime = 0;
        }
      }, 150);
    }

    // Função para animar a caneta e depois escrever a resposta
    function penMoveAndWrite(correctAnswer) {
      penContainer.classList.add("moving");

      setTimeout(() => {
        animatePenWritingWithSound(correctAnswer);
        setTimeout(() => {
          penContainer.classList.remove("moving");
        }, correctAnswer.length * 150 + 500);
      }, 1500);
    }

    // Clique na caneta para repetir a escrita da resposta
    penContainer.addEventListener("click", () => {
      if (penContainer.classList.contains("visible")) {
        const subject = subjects[currentSubjectKey];
        const currentQ = subject.questions[currentQuestionIndex];
        penMoveAndWrite(currentQ.answer);
      }
    });

    // Leãozinho ajuda com voz e mensagem
    lionContainer.addEventListener("click", () => {
      playLionVoice();
      showTeacherMessage("Oi! Quer que eu te ajude? Fique tranquilo, vamos aprender juntos!", 5000);
    });

    // Eventos dos botões
    btnSubmit.addEventListener("click", checkAnswer);
    btnNext.addEventListener("click", nextQuestion);
    btnChange.addEventListener("click", () => {
      totalCorrect = 0;
      answeredQuestions = 0;
      changeSubject();
    });

    // Enter no input para enviar
    answerInput.addEventListener("keydown", e => {
      if (e.key === "Enter" && !btnSubmit.disabled) {
        checkAnswer();
      }
    });

    // CALCULADORA
    let calcExpression = "";

    calcButtons.forEach(button => {
      button.addEventListener("click", () => {
        const val = button.getAttribute("data-value");
        if (!val) return;

        calcExpression += val;
        calcDisplay.textContent = calcExpression;
      });
    });

    calcClear.addEventListener("click", () => {
      calcExpression = "";
      calcDisplay.textContent = "";
    });

    calcEquals.addEventListener("click", () => {
      try {
        // Avaliar expressão com segurança
        let safeExpression = calcExpression.replace(/[^-()\d/*+.]/g, "");
        let result = Function('"use strict";return (' + safeExpression + ')')();
        calcDisplay.textContent = result;
        calcExpression = result.toString();
      } catch {
        calcDisplay.textContent = "Erro";
        calcExpression = "";
      }
    });

    // Inicializa primeira questão
    showQuestion();
  </script>
</body>
</html>

